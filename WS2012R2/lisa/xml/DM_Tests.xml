<?xml version="1.0" encoding="utf-8"?>

<config>
	<global>
		<logfileRootDir>LisaTestResults</logfileRootDir>
		<defaultSnapshot>ICABase</defaultSnapshot>
		<email>
			<recipients>
				<to>myboss@mycompany.com</to>
                <to>myself@mycompany.com</to>
			</recipients>
			<sender>myself@mycompany.com</sender>
			<subject>LIS_DM_tests_run_on_2012R2</subject>
			<smtpServer>mysmtphost.mycompany.com</smtpServer>
		</email>
	</global>

	<testSuites>
		<suite>
			<suiteName>DM</suiteName>
			<suiteTests>
				<suiteTest>DMLoaded</suiteTest>
				<suiteTest>StartupLowCompete</suiteTest>
				<suiteTest>StartupHighCompete</suiteTest>
				<suiteTest>SaveRestore</suiteTest>
				<suiteTest>DemandPressure</suiteTest>
				<suiteTest>HighPriority</suiteTest>
				<suiteTest>HotAdd</suiteTest>
				<suiteTest>HotRemove</suiteTest>
				<suiteTest>CleanShutdown</suiteTest>
				<suiteTest>MaxMemHonored</suiteTest>
				<suiteTest>MinMemHonored</suiteTest>
			</suiteTests>
		</suite>
		
	</testSuites>

	<testCases>

		<test>
			<testName>DMLoaded</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-01</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=1GB</param>
					<param>startupMem=512MB</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
			</testParams>
			<testScript>DM_VERIFY_LOADED.sh</testScript>
			<files>remote-scripts/ica/DM_VERIFY_LOADED.sh,remote-scripts/ica/Utils.sh</files>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>800</timeout>
		</test>
		
		<test>
			<testName>StartupLowCompete</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-03</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=80%</param>
					<param>startupMem=79%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=20%</param>
					<param>startupMem=19%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_StartupLowCompete.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>8000</timeout>
		</test>
		
		<test>
			<testName>StartupHighCompete</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-04</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=60%</param>
					<param>startupMem=60%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=40%</param>
					<param>startupMem=40%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
					<param>vmName=VM3Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=25%</param>
					<param>startupMem=25%</param>
					<param>memWeight=100</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_RemoveUnderPressure.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		
		<test>
			<testName>SaveRestore</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-04</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=80%</param>
					<param>startupMem=80%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=20%</param>
					<param>startupMem=20%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_SaveRestore.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>800</timeout>
		</test>
		
		<test>
			<testName>DemandPressure</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-05</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=20%</param>
					<param>startupMem=20%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_PressureChangesDemand.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		
		<test>
			<testName>HighPriority</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-01</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=50%</param>
					<param>startupMem=50%</param>
					<param>memWeight=100</param>
					<param>staticMem=1024MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=50%</param>
					<param>startupMem=50%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
			</testParams>
			<testScript>setupScripts\DM_HighPriority.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>3000</timeout>
		</test>
		
		<test>
			<testName>HotAdd</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-05</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=1024MB</param>
					<param>maxMem=4GB</param>
					<param>startupMem=1024MB</param>
					<param>memWeight=100</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_HotAdd.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>3000</timeout>
		</test>

		<test>
			<testName>HotRemove</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-09</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=1024MB</param>
					<param>maxMem=4GB</param>
					<param>startupMem=1024MB</param>
					<param>memWeight=100</param>
					<param>staticMem=1024MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=92%</param>
					<param>startupMem=92%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
			</testParams>
			
			<testScript>setupScripts\DM_HotAddRemove.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>3000</timeout>
		</test>
		
		<test>
			<testName>CleanShutdown</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-09</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=20%</param>
					<param>startupMem=20%</param>
					<param>memWeight=0</param>
					<param>staticMem=512MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=75%</param>
					<param>startupMem=75%</param>
					<param>memWeight=100</param>
					<param>staticMem=512MB</param>
			</testParams>

			<testScript>setupScripts\DM_CleanShutdown.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>1800</timeout>
		</test>
		
				<test>
			<testName>MaxMemHonored</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-01</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=80%</param>
					<param>startupMem=80%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=40%</param>
					<param>startupMem=40%</param>
					<param>memWeight=100</param>
					<param>staticMem=1024MB</param>
			</testParams>

			<testScript>setupScripts\DM_MaxMemHonor.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>3000</timeout>
		</test>

		<test>
            <testName>MinMemHonored</testName>
			<setupScript>SetupScripts\DM_CONFIGURE_MEMORY.ps1</setupScript>
			<testParams>
					<param>TC_COVERED=DM-01</param>
					<param>vmName=VMName</param>
					<param>enableDM=yes</param>
					<param>minMem=50%</param>
					<param>maxMem=80%</param>
					<param>startupMem=80%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
					<param>vmName=VM2Name</param>
					<param>enableDM=yes</param>
					<param>minMem=512MB</param>
					<param>maxMem=50%</param>
					<param>startupMem=50%</param>
					<param>memWeight=0</param>
					<param>staticMem=1024MB</param>
			</testParams>

			<testScript>setupScripts\DM_MinMemHonor.ps1</testScript>
			<cleanupScript>SetupScripts\DM_DISABLE.ps1</cleanupScript>
			<timeout>3000</timeout>
        </test>

	</testCases>
	
	<VMs>
		<vm>
			<hvServer>localhost</hvServer>
			<vmName>VMName</vmName>
			<os>Linux</os>
			<ipv4></ipv4>
			<sshKey>sshKey.ppk</sshKey>
			<suite>DM</suite>
			<testParams>
				<param>RootDir=D:\Automation</param>
				<param>sshKey=sshKey.ppk</param>
			</testParams>
		</vm>
	</VMs>
</config>